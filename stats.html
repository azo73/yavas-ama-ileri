<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>ƒ∞statistikler ‚Äì Yava≈ü Ama ƒ∞leri</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --yellow:#f5c400;--dark:#000;--card:#111
}
body{
  margin:0;
  background:var(--dark);
  color:var(--yellow);
  font-family:system-ui,sans-serif;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh
}
.card{
  width:360px;
  background:var(--card);
  padding:22px;
  border-radius:18px;
  text-align:center
}
h2{margin-top:0}
canvas{margin-top:20px}
a{
  color:var(--yellow);
  text-decoration:none;
  display:block;
  margin-top:16px;
  font-size:14px
}
</style>
</head>

<body>

<div class="card">
  <h2>üìä Son 7 G√ºn</h2>
  <canvas id="chart" width="300" height="160"></canvas>
  <a href="index.html">‚Üê Geri D√∂n</a>
</div>

<script>
function getDailyData(){
  return JSON.parse(localStorage.getItem("dailyPomodoro")) || {};
}

function drawChart(){
  const data = getDailyData();
  const days = Object.keys(data).slice(-7);
  const values = days.map(d => data[d]);

  const canvas = document.getElementById("chart");
  const ctx = canvas.getContext("2d");
  ctx.clearRect(0,0,canvas.width,canvas.height);

  const max = Math.max(1, ...values);
  const barW = 28;
  const gap = 14;

  days.forEach((day,i)=>{
    const h = (values[i]/max)*100;
    const x = 20 + i*(barW+gap);
    const y = 120 - h;

    ctx.fillStyle = "#f5c400";
    ctx.fillRect(x,y,barW,h);

    ctx.fillStyle = "#aaa";
    ctx.font = "10px system-ui";
    ctx.fillText(values[i], x+8, y-4);
    ctx.fillText(day.slice(5), x-4, 140);
  });

  if(days.length===0){
    ctx.fillText("Hen√ºz veri yok",80,80);
  }
}

drawChart();
</script>

</body>
</html>
